#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –ø–æ—Ä—Ç–æ–≤ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã..."
sudo lsof -i :80
sudo lsof -i :443

echo ""
echo "üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã..."
docker-compose -f docker-compose.prod.yml down

echo ""
echo "üßπ –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ/–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã..."
docker container prune -f

echo ""
echo "üßπ –û—á–∏—â–∞–µ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã..."
docker image prune -f

echo ""
echo "üßπ –û—á–∏—â–∞–µ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ç–∏..."
docker network prune -f

echo ""
echo "üßπ –û—á–∏—â–∞–µ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes (–û–°–¢–û–†–û–ñ–ù–û! –ù–µ —É–¥–∞–ª—è–µ–º volumes —Å –¥–∞–Ω–Ω—ã–º–∏)..."
# –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º docker volume prune, —á—Ç–æ–±—ã –Ω–µ —É–¥–∞–ª–∏—Ç—å –ë–î

echo ""
echo "üìã –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:"
docker ps -a

echo ""
echo "üìã –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –æ–±—Ä–∞–∑–æ–≤:"
docker images

echo ""
echo "‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π."

